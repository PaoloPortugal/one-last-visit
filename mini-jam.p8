pico-8 cartridge // http://www.pico-8.com
version 43
__lua__
-- mINI jAM gAME
-- bY: "MOOFYS", "eLHOMBRELLAVE", "mAKU"

-->8
-- main

#include gameplay.lua
#include visuals.lua
#include entities.lua

function _init()
-- runs once at the start
    spawn_player()
    spawn_objects()
    messages={}
end

function _update60()
-- runs at 60fps
    player:update(objects)
    update_objects()
    cam:update()
end

function _draw()
-- runs at 60fps
    cls(0)

    camera(cam:cam_pos())

    for c in all(clocks) do
        c:draw_fade()
    end

    draw_base_map(player.timeshift)

    for obj in all(objects) do
        obj:draw()
    end

    player:draw()

    draw_map_over()

    camera(0,0)

    player:draw_hud()
    
end

function spawn_player()
    s_x=29*8 -- spawn x position
    s_y=38*8 -- spawn y position
    player=make_player(s_x,s_y)
    cam=make_camera(player)
end

function spawn_objects()
    local chair=make_chair(8*8,30*8)
    local clock_1,clock_1_m=make_clock(20*8,25*8)
    clocks={clock_1,clock_1_m}
    objects={chair,clock_1,clock_1_m}
end

function update_objects()
    for obj in all(objects) do
        obj:update()
    end
end

__gfx__
00000000000019999991000000001999999100000000011111100000000001111110000000000111111000000000011111100000000001111110000066666666
00000000000199999999100000019999999910000000199999910000000019999991000000001999999100000000199999910000000019999991000066666666
00000000001999999999910000199999999991000001999999991000000199999999100000019999999910000001999999991000000199999999100066666666
00000000019999999999991001999999999999100019999999999100001999999999910000199999999991000019999999999100001999999999910066666666
00000000011111111111111001111111111111100199999999999910019999999999991001999999999999100199999999999910019999999999991066666666
00000000199199199191919119919919919191910111111111111110011111111111111001111111111111100111111111111110011111111111111066666666
00000000199199199191919119919919919191911991991991919191199191999199199119919199919919911991919991991991199191999199199166666666
00000000011111111111111001111111111111101991991991919191199191999199199119919199919919911991919991991991199191999199199166666666
00888800001ffffffffff100001ffffffffff1000111111111111110011111111111111001111111111111100111111111111110011111111111111066666666
08000080001ff7ffff7ff100001ff7ffff7ff100001ffffffffff100001ffffffffff100001ffffffffff100001ffffffffff100001ffffffffff10066666666
80700708001ff7ffff7ff100001ff7ffff7ff100001ff7ffff7ff100001ffffffff7f100001ffffffff7f100001ffffffff7f100001ffffffff7f10066666666
80077008001ffffffffff100001ffffffffff100001ff7ffff7ff100001ffffffff7f100001ffffffff7f100001ffffffff7f100001ffffffff7f10066666666
800770080001ffffffff10000001ffffffff1000001ffffffffff100001ffffffffff100001ffffffffff100001ffffffffff100001ffffffffff10066666666
80700708000011ffff110000000011ffff1100000001ffffffff10000001ffffffff10000001ffffffff10000001ffffffff10000001ffffffff100066666666
0800008000011555555110000001155555511000000011ffff110000000011ffff110000000011ffff110000000011ffff110000000011ffff11000066666666
00888800000155555555100000015555555510000001555555551000000015555551000000001555555100000000155555510000000015555551000066666666
000990000001f555555f10000001f555555f10000001f555555f1000000015155551000000001515115100000000151555510000000015555551110055dddd55
000990000001f555555f10000001f555555f10000001f555555f1000000015111551000000001511ff1100000000111555510000000015555155ff1055dddd55
000990000001f444444f10000001f444444f10000001f555555f10000000151ff151000000001551ff1100000001ff1555510000000015555515ff10dddddddd
000990000000141111410000000014111141000000001444444100000000141ff141000000001444114100000001ff14144100000000144444411100dddddddd
000990000000141001410000000012100141000000001411114100000000144114410000000114411444100000001144114411000000144114410000dddddddd
000000000000121001210000000011100121000000001410012100000000122112210000001222210122210000012221001222100000122112210000dddddddd
00099000000011100111011000000000011100000000121001110000000012221222100000122111012210000001221100122100000012221222100055555555
000990000001610000001bb101666610016666100000111000000000000001110111000000011100001100000000111000011000000001110111000055555555
055555500016761000013b101622226116111161000166100000161000001a106666666655dddd5555555555555555555555555555dddd5555dddd5555dddd55
555555550167776100013100656226566561165600166661000160610001a0a16666666655dddd5555555555555555555555555555dddd5555dddd5555dddd55
5555555516777776001331006556655665566556000166660010160600101a0a6666666655dddd5555dddddddddddddddddddd5555dddddddddddd55dddddd55
5555555567777761011331106555555665555556001446660161616101a1a1a16666666655dddd5555dddddddddddddddddddd5555dddddddddddd55dddddd55
55555555167776101444444116555561165555610144416110161010101a10106666666655dddd5555dddddddddddddddddddd5555dddddddddddd55dddddd55
55555555016761001444444116555561165555611444101061610000a1a100006666666655dddd5555dddddddddddddddddddd5555dddddddddddd55dddddd55
555555550016100001444410016666100166661044410000161000001a1000006666666655dddd5555dddd555555555555dddd55555555555555555555dddd55
05555550000101111011110000000111111000004410000061000000a10000006666666655dddd5555dddd555555555555dddd55555555555555555555dddd55
003333333333330065666665566666564444444444444444777777773333333300ffffffffffff000fffffffffffffffffffff0000ffffffffffffffffffff00
03666666666666305566666556666655444444444444444477777777333333330f555555555555f0f444444444444444444444f00f11111111111111111111f0
36444444444444636665555555555666444444444444444477777777333333330f666666666665f00f4444444444444444444f00f1cccccccccccccccccccc1f
34444444444444436656666666666566444444444444444477777777333333330f666666666665f00f4456666444446666544f00f1c11111111cc11111111c1f
34444444444444436656655665566566444444444444444477777777333333330f666666666665f00f4566666655566666654f00f1c11111111cc11111111c1f
34444444444444436656565665656566444444444444444477777777333333330f666666666665f00f5666666665666666665f00f1555111111cc1111115551f
34444444444444436656556556556566444444444444444477777777333333330f66f666666665f00f6666666665666666666f00f1515111111cc1111115151f
03555555555555305556665665666555444444444444444477777777333333330f66f666666665f00f6666666665666666666f00f1515111111cc1111115151f
34444444444444435556665665666555444444444444444400000000000000000f66f666666665f00f5555555555555555555f00f1515ddccccccccccdd5151f
34444444444444436656556556556566444444444444444400000000000000000f66f666666665f0f577777777777777777775f0f1515dddddddddddddd5151f
34444444444444436656565665656566444444444444444400000000000000000f666666666665f0f577777777777777777775f0f1515dddddddddddddd5151f
34433333333334436656655665566566444444444444444400000000000000000ffffffffffffff00f5555555555555555555f00f1515dddddddddddddd5151f
34430000000034436656666666666566444444444444444400000000000000000f555555555555f00f2222222222222222222f00f1515dddddddddddddd5151f
33330000000033336665555555555666444444444444444400000000000000000f666666666665f00f2222222222222222222f00f1515555555555555555151f
00000000000000005566666556666655444444444444444400000000000000000f66f666666665f00f2222222222222222222f00f1555ffffffffffffff5551f
00000000000000006566666556666656444444444444444400000000000000000f66f666666665f00f2222222222222222222f000ffff00000000000000ffff0
00000000000000000000000000000000000000000000000000000000000000000f66f666666665f00f2222222222222222222f00000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000f66f666666665f00f2222222222222222222f00000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000f66f666666665f00f2222222222222222222f00000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000f66f666666665f00f2222222222222222222f00000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000f66f666666665f00f2222222222222222222f00000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000f66f666666665f00f2222222222222222222f00000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000f666666666665f0f444444444444444444444f0000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000f666666666665f00f4665656656566556664f00000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000f666666666665f00f4444444444444444444f00000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000f666666666665f00f4555555555555555554f00000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000f666666666665f00f4445554455544555444f00000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000f666666666665f00f4444544445444454444f00000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000f666666666665f00f4444444444444444444f00000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000ffffffffffff000f4444444444444444444f00000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000fff0000fff0000f4fffffffffffffffff4f00000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000f00000000000000000f000000000000000000000000000
93455545554555455545554555455545554555455545554555934555455555555555555555555555934555455545554555455545554555455545559300000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
93445444544454445444544454445444544454445444544454934454555555555555555555555554934454445444544454445444544454445444549300000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
93455545554555455545554555455545554555455545554555934555555555555555555555555555934555455545554555455545554555455545559300000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
93445444544454445444544454445444544454445444544454934454555555555555555555555554934454445444544454445444544454445444549300000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
93455545554555455545554555455545554555455545554555934555455555555555555555554555934555455545554555455545554555455545559300000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
d3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3f2b3c344544454a3b3b3b3b3b3b3b3f2b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3e300000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
f1838383838383838383838383838383838383838383838383f1f193455545559383838383838383f1838383838383838383838383838383838383f100000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
f1838383838383838383838383838383838383838383838383f1f193445444549383838383838383f1838383838383838383838383838383838383f100000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
f1838383838383838383838383838383838383838383838383f1f193455545559383838383838383f1838383838383838383838383838383838383f100000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
f1838383838383838383838383838383838383838383838383f1f193445444549383838383838383f1838383838383838383838383838383838383f100000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
f1838383838383838383838383838383838383838383838383f1f193455545559383838383838383f1838383838383838383838383838383838383f100000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
f1838383838383838383838383838383838383838383838383f1f193445444549383838383838383f1838383838383838383838383838383838383f100000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
f1838383838383838383838383838383838383838383838383f1f193455545559383838383838383f1838383838383838383838383838383838383f101000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
64646464646464646464646464646464646464646464646464646493445444549364646464646464646464646464646464646464646464646464646401000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
64646464646464646464646464646464646464646464646464646493455545559364646464646464646464646464646464646464646464646464646401000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000001010101010100000000000000000000000000000000000000000000000000010101010100
__gff__
0000000000000000000000000000000081000000000000000000000000000001000000000000000000000000000000020000000000000000020101020103030200000000000001000000000000010101010101010100000000000000000101010101010101000000000000000000000001010101010000000000000000000000
0101010101000000000000000001010101010101010000000000000000010101010101010100000000000000000101010101010101000000000000000001010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
000000003a3b3b3b3b3b3b3b3b3b3b3b3b3b3b3b3c00000000000000000000000000000000000000000000003a3b3b3b3b3b3b3b3b3b3b3b3b3b3b3c0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000390f0f0f0f0f0f0f0f0f0f0f0f0f0f0f390000000000000000000000000000000000000000000000390f0f0f0f0f0f0f0f0f0f0f0f0f0f390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000390f0f0f0f0f0f0f0f0f0f0f0f0f0f0f390000000000000000000000000000000000000000000000390f0f0f0f0f0f0f0f0f0f0f0f0f0f390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000390f0f0f0f0f0f0f0f0f0f0f0f0f0f0f390000000000000000000000000000000000000000000000390f0f0f0f0f0f0f0f0f0f0f0f0f0f390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000390f0f0f0f0f0f0f0f0f0f0f0f0f0f0f390000000000000000000000000000000000000000000000390f0f0f0f0f0f0f0f0f0f0f0f0f0f390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000039464646464646464646464646464646390000000000000000000000000000000000000000000000394646464646464646464646464646390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000039464646464646464646464646464646391010101010101010101010101010101010101010101010394646464646464646464646464646390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000039444545444544454445444544454445394747474747474747474747474747474747474747474747394445444544454445444544454445390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000039545555545554555455545554555455394747474747474747474747474747474747474747474747395455545554555455545554555455390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000039444544454445444544454445444445394747474747474747474747474747474747474747474747394445555444454445444544455455390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000039545554555455545554555455545455394747474747474747474747474747474747474747474747395455454454555455545554554445390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000039444545444544454445444544454445394747474747474747474747474747474747474747474747394445444555545554444544455455390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000039545555545554555455545554555455394747474747474747474747474747474747474747474747395455545545444544545554554445390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000039444545444544454445444544454445394747474747474747474747474747474747474747474747394454555455545554444544455455390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000039545555545554555455444554555455394747474747474747474747474747474747474747474747395455444544454445545544454445390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000003d3b3b3b3b3b3b3b3b3c54553a3b3b3b3e4747474747474747474747474747474747474747474747394445545554555455545554555455390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000001f3838383838383838394445393838381f474747474747474747474747474747474747473a3b3b3b3e54553b3b3b3b3b3b3b3b3b3b3b3b3f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000001f1f1f1f1f1f1f1f1f395455391f1f1f1f47474747474747474747474747474747474747393838381f44451f3838383838383838383838390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3a3b3b3b3b3b3b3b3b3b3b3b3b3e44453d3b3b3b3b3b3b3b3b3c4747474747474747474747474747393838381f54551f3838383838383838383838390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
390f0f0f0f0f0f0f0f0f0f0f0f1f54551f3838383838383838394747474747474747474747474747393838381f44451f3838383838383838383838390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
390f0f0f0f0f0f0f0f0f0f0f0f1f44451f3838383838383838394747474747474747474747474747391f1f1f1f54551f1f1f1f1f1f1f1f1f1f1f1f390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
390f0f0f0f0f0f0f0f0f0f0f0f1f54551f383838383838383839474747474747474747474747474739464646465555464646464646464646464646390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
390f0f0f0f0f0f0f0f0f0f0f0f1f44451f1f1f1f1f1f1f1f1f3d3b3b3b3b3b3b3b3b3b3b47473b3b3e464646465555464646464646464646464646390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
394646464646464646464646464654554646464646464646461f3838383838383838381f47471f3838444544454445444544454445444544454445390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
394646464646464646464646464644454646464646464646461f3838383838383838381f47471f3838545554555455545554555455545554555455390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
394445444544454445444544454445444544454445444544451f3838383838383838381f47471f3838444544454445444544454445444544454445390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
395455545554555455545554555455545554555455545554551f1f1f1f1f1f1f1f1f1f1f54541f1f1f545554555455545554555455545554555455390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3944454445444544454445444544454445444544454445444546464646464646464646465454464646444544454445444544454445444544454445390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3954555455545554555455545554555455545554555455545546464646464646464646465454464646545554555455545554555455545554555455390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3944454445444544454445444544454445444544454445444544454445444544454445444544454445444544454445444544454445444544454445390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3954555455545554555455545554555455545554555455545554555455545554555455545554555455545554555455545554555455545554555455390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3944454445444544454445444544454445444544454445444539444544455555555555555555444539444544454445444544454445444544454445390000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
